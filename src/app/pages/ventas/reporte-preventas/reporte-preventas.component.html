<div class="my-container">
    <section class="content">
        <div class="container-fluid">
            <div class="block-header">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <ul class="breadcrumb breadcrumb-style ">
                            <li class="breadcrumb-item">
                                <h4 class="page-title">REPORTE PREVENTAS</h4>
                            </li>
                            <li class="breadcrumb-item bcrumb-1">
                                <a routerLink="/dashboard/main">
                                    <i class="fas fa-home"></i> Home</a>
                            </li>
                            <li class="breadcrumb-item active">Preventas</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="clearfix">
                <div class="row">
                    <div class="col-lg-3">
                        <div class="card" style="height: 220px">
                            <div class="card-body">
                                <form class="row" [formGroup]="formFilter" (submit)="filtrarInformacion()">
                                    <ng-select formControlName="empleadoId"
                                               placeholder="Prevendedor"
                                               appearance="outline" style="padding-top: 0;padding-bottom: 0">
                                        <ng-option *ngFor="let item of listPrevendedores" [value]="item.id">
                                            {{item.persona.nombre}}&nbsp;{{item.persona.apellidos}}</ng-option>
                                        <mat-error
                                                *ngIf="formFilter.get('empleadoId').hasError('required')">
                                            campo es requerido
                                        </mat-error>

                                    </ng-select>
                                    <div class="mt-3">
                                        <mat-form-field class="example-full-width" appearance="outline">
                                            <mat-label>Fecha</mat-label>
                                            <input matInput [matDatepicker]="picker" formControlName="fecha">
                                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                            <mat-datepicker #picker></mat-datepicker>
                                            <mat-error
                                                    *ngIf="formFilter.get('fecha').hasError('required')">
                                                campo es requerido
                                            </mat-error>
                                        </mat-form-field>

                                    </div>
                                    <div class="mt-2 d-grid">
                                        <button class="btn btn-sm btn-success " type="submit">
                                            Filtrar
                                        </button>
                                    </div>
                                </form>
                            </div>


                        </div>
                    </div>
                    <div class="col-lg-6 ">
                        <div class="card" style="height: 220px">
                            <div class="card-body">
                                <h5>NO PEDIDOS</h5>
                                <table class="table table-borderless table-striped">
                                    <tbody>
                                    <tr>
                                        <td *ngFor="let item of listMNC">{{item.codigo}}</td>
                                    </tr>
                                    <tr>
                                        <td *ngFor="let item of listMNC">{{mapMNC.get(item.codigo).cantidad}}</td>
                                    </tr>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 ">
                        <div class="card" style="height: 220px">
                            <div class="card-body">
                                <table class="table table-borderless">
                                    <thead>
                                    <tr>
                                        <th></th>
                                        <th>20</th>
                                        <th>7</th>
                                        <th>2.5</th>
                                        <th>0.650</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>CANT</td>
                                        <td>{{resumenTotal.get('20lt').cantidad}}</td>
                                        <td>{{resumenTotal.get('7lt').cantidad}}</td>
                                        <td>{{resumenTotal.get('2.5lt').cantidad}}</td>
                                        <td>{{resumenTotal.get('0.650lt').cantidad}}</td>
                                    </tr>
                                    <tr>
                                        <td>BONI</td>
                                        <td>{{resumenTotal.get('20lt').bonificacion}}</td>
                                        <td>{{resumenTotal.get('7lt').bonificacion}}</td>
                                        <td>{{resumenTotal.get('2.5lt').bonificacion}}</td>
                                        <td>{{resumenTotal.get('0.650lt').bonificacion}}</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-content ">
                                <div class="table-responsive mt-5">
                                    <div class="container-fluid">
                                        <div class="">
                                            <table class="table  table-striped table-bordered">
                                                <thead>
                                                <tr>
                                                    <td rowspan="2" style="vertical-align: middle">Nro</td>
                                                    <td rowspan="2" style="vertical-align: middle">Nombre Comercial
                                                        Razon
                                                        Social
                                                    </td>
                                                    <td rowspan="2" style="vertical-align: middle">Direccion</td>
                                                    <td rowspan="2" style="vertical-align: middle">Codigo</td>
                                                    <td colspan="2" style="vertical-align: middle">20 LT</td>
                                                    <td colspan="2" style="vertical-align: middle">20 LT</td>
                                                    <td colspan="2" style="vertical-align: middle">7 LT</td>
                                                    <td colspan="1" style="vertical-align: middle">BONI</td>
                                                    <td colspan="2" style="vertical-align: middle">2.5 LT</td>
                                                    <td colspan="1" style="vertical-align: middle">BONI</td>
                                                    <td colspan="2" style="vertical-align: middle">0.650 LT</td>
                                                    <td colspan="1" style="vertical-align: middle">BONI</td>
                                                    <td style="vertical-align: middle">OFERTA</td>
                                                    <td rowspan="2" style="vertical-align: middle">OBSERVACIONES</td>
                                                    <td rowspan="2" style="vertical-align: middle">MNC</td>
                                                </tr>
                                                <tr>
                                                    <td style="vertical-align: middle">L+E</td>
                                                    <td style="vertical-align: middle">S/.</td>
                                                    <td style="vertical-align: middle">LIQ</td>
                                                    <td style="vertical-align: middle">S/.</td>
                                                    <td style="vertical-align: middle">CANT</td>
                                                    <td style="vertical-align: middle">S/.</td>
                                                    <td style="vertical-align: middle">CANT</td>
                                                    <td style="vertical-align: middle">CANT</td>
                                                    <td style="vertical-align: middle">S/.</td>
                                                    <td style="vertical-align: middle">CANT</td>
                                                    <td style="vertical-align: middle">CANT</td>
                                                    <td style="vertical-align: middle">S/.</td>
                                                    <td style="vertical-align: middle">CANT</td>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr *ngFor="let item of listReporte;let i=index">
                                                    <td>{{i + 1}}</td>
                                                    <td>{{item.cliente.persona.nombre}}&nbsp;{{item.cliente.persona.apellidos}}
                                                    </td>
                                                    <td>{{item.cliente.persona.direccion}}</td>
                                                    <td>{{item.cliente.codigo}}</td>
                                                    <td *ngFor="let item of item.detallePreventa">
                                                        <div *ngIf="item.tipo==1">
                                                        <span *ngIf="item.isActive">
                                                             {{item.cantidad}}
                                                        </span>
                                                        </div>
                                                        <div *ngIf="item.tipo==2">
                                                        <span *ngIf="item.isActive">
                                                             {{item.subtotal.toFixed(2)}}
                                                        </span>
                                                        </div>
                                                        <div *ngIf="item.tipo==3">
                                                            {{item.descripcion}}
                                                        </div>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

    </section>
